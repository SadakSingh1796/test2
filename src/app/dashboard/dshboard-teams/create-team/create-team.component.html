<div class="common-dialog">
    <div class="innerContent">
        <form [formGroup]="_teamForm">
            <div class="topbar">
                <div class="flex-vc flex-sb">
                    <div class="content">
                        <div class="flex-vc _borderDropdown">
                            <p-dropdown [options]="_abled" appendTo="body" placeholder="Select"
                                optionLabel="name" [formControlName]="'abled'" [disabled]="edit"></p-dropdown>
                                <div class="error-txt-msg mb-2" *ngIf="_isSubmitDetails && _teamForm.controls['abled'].hasError('required')"
                                    style="color: red">
                                    <span style="color: red">*</span>{{'signupmanagement.req'|translate}}
                                </div>
                            <p-dropdown (onChange)="getPlayersinCategory($event)" class="ms-2" [options]="_masterCategoriesList" appendTo="body"
                                placeholder="Category" optionLabel="category_description" optionValue="category_id"
                                [formControlName]="'category'" [disabled]="edit"></p-dropdown>
                                <div class="error-txt-msg mb-2" *ngIf="_isSubmitDetails && _teamForm.controls['category'].hasError('required')"
                                    style="color: red">
                                    <span style="color: red">*</span>{{'signupmanagement.req'|translate}}
                                </div>
                                
                                <p-dropdown [(ngModel)]="selectedValue" class="ms-4" [options]="_playerList" [filter]="true" appendTo="body" 
                                placeholder="Select Player" optionLabel="name"  [ngModelOptions]="{standalone: true}"
                                (onChange)="addPlayer($event)" (focusout)="clearDropdown($event)"></p-dropdown>
                        </div>
                    </div>
                    <div class="action" (click)="closePopUp()">
                        <i class="pi pi-times-circle text-danger p-links"></i>
                    </div>
                </div>
            </div>
            <div class="editable-heading ">

                <div *ngIf="!edit" class="heading-input">
                    <input  pInputText [placeholder]="_heading"  [formControlName]="'teamName'"
                        (focusout)="editFeild(true)" 
                        >
                    <div class="btn edit-icon" (click)="editFeild(false)">
                        <i class="pi pi-pencil p-green i-small"></i>
                    </div>
                </div>
                <div class="error-txt-msg mb-2" *ngIf="_isSubmitDetails && _teamForm.controls['teamName'].hasError('required')"
                    style="color: red">
                    <span style="color: red">*</span>{{'signupmanagement.req'|translate}}
                </div>
                <div *ngIf="edit" class="heading-input">
                    <input  pInputText [placeholder]="_heading"  [formControlName]="'teamName'"
                      [readOnly]="edit"
                        >
                    <div class="btn edit-icon" (click)="editFeild(false)">
                        <i class="pi pi-pencil p-green i-small"></i>
                    </div>
                </div>
            </div>
        </form>
        <div class="player-array mt-2">
            <div class="playerRow">
                <div class="flex-vc flex-sb mb-2" *ngFor="let item of _playersArray;let i=index">
                    <p-avatar shape="circle" label="PK" size="small"></p-avatar>
                    <p class="p-secondary-dark">{{item.name}}</p>
                    <p class="p-secondary-dark">{{item.email}}</p>
                    <p class="p-combine p-links" (click)="removePlayer(item,i)">Remove player</p>
                </div>
            </div>
            <!-- <div class="addPLayer">
                <div class="row" *ngIf="_showDrpdwn">
                    <div class="col-4">
                        <div class="_borderDropdown">
                            <p-dropdown appendTo="body" [options]="_playerList" [(ngModel)]="_selectedPlayer"
                                optionLabel="name" [filter]="true" filterBy="name" placeholder="Search"
                                (onChange)="_showDrpdwn = false"></p-dropdown>
                        </div>
                    </div>
                </div>
                <button class="btn flex-vc addFieldBtn" (click)="showDropdown()">
                    <i class="pi pi-plus i-small"></i>
                    <p class="ms-2">Add Field</p>
                </button>
            </div> -->
        </div>
        <div class="mt-3">
            <button *ngIf="!edit" class="btn btn_green m-0 w-auto" (click)="duplicateTeam()">Save</button>
            <button *ngIf="edit" class="btn btn_green m-0 w-auto" (click)="updateTeam()">Save</button>
            
        </div>
        <div class="errorMsg mt-2" *ngIf="_isSubmitDetails">
            <div class="flex-vc">
                <i class="pi pi-info-circle text-danger"></i>
                <p class="p-small text-danger ms-2">Sorry, team canâ€™t be created. Minimum 3 athletes are required to
                    create a single team</p>
            </div>
        </div>
    </div>
</div>
<p-toast position="bottom-center" key="bc"></p-toast>
<stupa-gif-loader *ngIf="_showLoader"></stupa-gif-loader>
