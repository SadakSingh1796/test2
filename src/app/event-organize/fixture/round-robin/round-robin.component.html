<section class="top" data-aos="fade-down" data-aos-duration="1000" class="top">
    <div class="topBar">
        <div class="parentFlex">
            <div class="scheduleBut" *ngIf="_isLocked">
                <div class="parentFlex">
                    <div class="scheduleBut">
                        <button class="btn btnSchedule flex-vc flex-hc" (click)="openDialog()">
                            <img class="me-2" src="../../../../assets/icons/svg/Schedule-icon.svg" width="20" alt="">
                            Schedule
                        </button>
                    </div>
                </div>
                <!-- <button class="btn btnSchedule flex-vc flex-hc" (click)="openDialog()">
                    <img class="me-2" src="../../../../assets/icons/svg/Schedule-icon.svg" width="20" alt="">
                    Schedule
                </button> -->
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="greyBox">
                    <div *ngIf="_selectedPlayerForMainDraw.length !== 0;else emptyBox">
                        <div class="header mb-2">
                            <div class="flex-sb flex-vc">
                                <div class="leftSection">
                                    <div class="flex-vc">
                                        <p>Number of players sent to Main Draw</p>
                                        <p class="ms-2">12</p>
                                    </div>
                                </div>
                                <div class="right-eventHandler flex-vc">
                                    <div class="iconBox">
                                        <i class="i-small p-green pi pi-eye"></i>
                                    </div>
                                    <div class="iconBox">
                                        <i class="i-small p-green pi pi-user-plus"></i>
                                    </div>
                                    <div class="iconBox">
                                        <svg width="8" hight="8" viewBox="0 0 9 12" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M1.16565 6.30964C1.07629 5.14805 1.99473 4.15625 3.15975 4.15625H6.2092C7.37422 4.15625 8.29266 5.14805 8.20331 6.30964L7.98465 9.15225C7.90449 10.1942 7.03561 10.9989 5.99054 10.9989H3.37841C2.33334 10.9989 1.46446 10.1942 1.38431 9.15224L1.16565 6.30964Z"
                                                stroke="#CA0D0D" />
                                            <path d="M7.84262 2.58594H1.52637" stroke="#CA0D0D"
                                                stroke-linecap="round" />
                                            <path
                                                d="M3.63184 2C3.63184 1.44771 4.07955 1 4.63184 1H4.73725C5.28954 1 5.73725 1.44772 5.73725 2V2.57906H3.63184V2Z"
                                                stroke="#CA0D0D" />
                                            <path d="M5.7373 6.25781V8.88958" stroke="#CA0D0D" stroke-linecap="round" />
                                            <path d="M3.63184 6.25781V8.88958" stroke="#CA0D0D"
                                                stroke-linecap="round" />
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr class="divider m-0" />

                        <div class="innerContent">
                            <ng-container>
                                <p-table class="common-table text-center" [value]="_selectedPlayerForMainDraw">
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th>Name</th>
                                            <th>State</th>
                                            <th>Club</th>
                                            <th>Point</th>
                                            <th>Email</th>
                                            <th></th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-player>
                                        <tr>
                                            <td>{{ player.name }}</td>
                                            <td>{{ player.state }}</td>
                                            <td>{{ player.club }}</td>
                                            <td>{{ player.points }}</td>
                                            <td>{{ player.email }}</td>
                                            <td></td>
                                        </tr>
                                    </ng-template>
                                </p-table>
                            </ng-container>
                        </div>
                    </div>
                    <ng-template #emptyBox>
                        <div class="empty h-100">
                            <div class="row flex-vc h-100">
                                <div class="col-5">
                                    <img width="150" src="../../../../assets/icons/svg/empty.svg" alt="">
                                </div>
                                <div class="col-7">
                                    <p class="p-small p-secondary lineSpace">If you have any problem in creating
                                        fixture you
                                        can contact our support. Reach out to us at support@stupaanalytics.com
                                    </p>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="greyBox">
                    <div class="header mb-2 mt-3">
                        <div class="flex-sb flex-vc">
                            <div class="leftSection">
                                <div class="flex-vc">
                                    <p>Total Number of player in this category are</p>
                                    <p class="p-combine ms-2">{{totalPlayer}}</p>
                                </div>
                            </div>
                            <div class="right-eventHandler flex-vc" (click)="viewPlayer()">
                                <div class="iconBox">
                                    <i class="i-small p-green pi pi-eye"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <hr class="divider m-0" /> -->
                    <div class="innerContent">
                        <div class="mt-4" *ngIf="_groupList.length==0">
                            <button class="btn btn_green m-0" (click)="createDraw()">
                                Create Draw
                            </button>
                        </div>
                        <div class="mt-4" *ngIf="_groupList.length>0">
                            <button class="btn btn-danger w-100" (click)="deleteFixtures()">
                                Delete
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="bottom mt-3">

    <div class="row" *ngIf=" _groupList.length>0">
        <div class="col-lg-6">
            <div class="flex-vc gap-4" *ngIf="!_isLocked && _groupList.length>0">
                <button class="btn btn_green btnDone m-0" (click)="createCustomGroup()">Save Changes</button>
                <button class="btn btn_green btnDone m-0" (click)="saveAsBefore()">Save As Before</button>
            </div>
            <div class="groupBox">
                <h6 class="heading mb-2 p-green"><b>Total Players <b class="p-combine">{{_groupList.length}}</b></b>
                </h6>
                <div class="headding" style="margin:0 10px;">
                    <div class="row kill">  
                        <div class="col-1">#</div>
                        <div class="col-3">Team</div>
                        <div class="col-3"></div>
                        <div class="col-2" style="text-align: center;">Club</div>
                        <div class="col-2">Points</div>
                    </div>
                </div>
                <div class="greyBox">
                    <div class="card-row" *ngFor="let matches of _groupList; let i = index" appDragDropSwap
                        [elemPosition]="i" [list]="_groupList" (returnUpdatedList)="returnUpdatedList($event)">
                        <div class="cardflex flex-vc">
                            <div class="innerBox matchRow text-center flex-sb flex-vc row w-100">
                                <div class="col-1">
                                    <p>
                                        {{i + 1}}.
                                    </p>
                                </div>
                                <div class="col-3 leftSide">
                                    <p class="text-overflow" >
                                        {{matches.participant_name}}
                                    </p>
                                </div>
                                <div class="col-4 leftSide">
                                    <p class="text-overflow">{{matches.state}}</p>
                                </div>
                                <div class="col-2 leftSide">
                                    <p class="text-overflow">
                                        {{matches.club}}
                                    </p>
                                </div>
                                <div class="col-2 leftSide">
                                    <p class=" text-overflow">
                                        {{matches.points==null?0:matches.points}}
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="innerBox mergeBox p-links" *ngIf="false">
                            <div class="mergeIcon">
                                <svg width="100%" viewBox="0 0 29 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M0 2.22381V4.4559L2.7413 4.47683C5.76858 4.51171 5.82438 4.51868 6.82883 4.993C7.61006 5.36269 8.16111 5.78121 9.34691 6.93911C9.93981 7.51806 10.6583 8.20164 10.9443 8.45973L11.4535 8.92708L10.9443 9.39442C10.6583 9.65251 9.93981 10.3361 9.34691 10.915C8.16111 12.0729 7.61006 12.4915 6.82883 12.8611C5.82438 13.3355 5.76858 13.3424 2.7413 13.3773L0 13.3982V15.6303V17.8555H2.51111C3.8992 17.8555 5.32914 17.8206 5.7058 17.7857C7.12179 17.6323 8.46802 17.1928 9.59105 16.5023C10.456 15.9791 11.1744 15.3792 12.6951 13.9005C14.1669 12.4775 14.69 12.066 15.4922 11.6893C16.4617 11.2289 16.6152 11.208 19.0426 11.1801L21.2398 11.1522L19.9564 12.4426C18.8194 13.5796 18.6729 13.754 18.6729 13.9563C18.6729 14.1167 18.7287 14.2283 18.8612 14.3469L19.0565 14.5143L20.9189 14.4934C22.7116 14.4724 22.7883 14.4655 23.0952 14.305C23.3185 14.1934 24.1555 13.4052 25.7598 11.7939C28.0407 9.50603 28.1035 9.44325 28.1454 9.12238C28.2291 8.55041 28.1035 8.38998 25.6831 5.97652C23.7928 4.10016 23.4022 3.73745 23.0464 3.57702C22.6349 3.38171 22.6279 3.38171 20.8492 3.36078L19.0635 3.33288L18.8682 3.50029C18.7287 3.62584 18.6729 3.73745 18.6729 3.89788C18.6729 4.10016 18.8194 4.27455 19.9564 5.41152L21.2398 6.70195L19.0426 6.67405C16.6152 6.64615 16.4617 6.62522 15.4922 6.16485C14.69 5.78819 14.1669 5.37664 12.6951 3.95368C11.1744 2.47492 10.456 1.87504 9.59105 1.35189C8.46802 0.661337 7.12179 0.221892 5.7058 0.0684356C5.32914 0.033559 3.8992 -0.0013175 2.51111 -0.0013175H0V2.22381Z"
                                        fill="#555555" />
                                </svg>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="groupBox">
                <h6 class="heading mb-2 p-green"><b>Players Order</b></h6>
                <div class="greyBox gb2">
                    <div>
                        <div class="matchRow text-center flex-sb flex-vc row" *ngFor="let matches of _topPlayersList">
                            
                            
                            <div class="col-1 leftSide">
                                <p class="p-combine">
                                    {{"R"+matches.round}}
                                    <!-- {{matches.round}} -->
                                </p>
                            </div>
                            <div class="col-4 leftSide">
                                <p class="p-green text-overflow">
                                    {{matches.match_details[0]?.participant_name}}
                                </p>
                            </div>
                            <div class="col-1">
                                <p class="p-green" style="font-size:10px; font-weight:bolder">VS</p>
                            </div>
                            <div class="col-4 leftSide">
                                <p class="p-green text-overflow">
                                    {{matches.match_details[1]?.participant_name}}
                                </p>
                            </div>
                            <div class="col-2">
                                <p class="p-green">
                                    {{matches.match_details[0].set_won
                                    + '-' +
                                    matches.match_details[1].set_won}}
                                </p>
                            </div>
                        </div>
                        <!-- <p-table class="common-table text-center" [value]="_topPlayersList">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th>Name</th>
                                    <th>State</th>
                                    <th>Club</th>
                                    <th>Point</th>
                                    <th>Email</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-player>
                                <tr>
                                    <td>{{player.round}}</td>
                                    <td>{{player.playerAName}}</td>
                                    <td>Vs</td>
                                    <td>{{player.playerBName}}</td>
                                    <td>{{player.score}}</td>
                                </tr>
                            </ng-template>
                        </p-table> -->
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>
<p-dialog [(visible)]="_openSchedule" [closable]="true" [showHeader]="true" [modal]="true" [draggable]="false"
    [style]="{width: '98vw', height:'98vh'}" [baseZIndex]="10000" (onHide)="refreshAllData()">
    <stupa-match-scheduler [_matchDetailsList]="_matchDetailsList"
        (getLeftMathesForSlots)="getGroupMatchsForSchedule($event)" [_matchDetailsListCopy]="_matchDetailsListCopy"
        (getListWithCategoryId)="getGroupMatchsForSchedule($event)" [_fixtureFormat]="_fixtureFormat"
        [_tabIndex]="_tabIndex" (_isScoreUpadted)="_isScoreUpadted($event)"
        [selectedParticipantId]="_currentParticipantId" [selectedCategoryId]="_currentCategoryId"
        [isKnockout]="false"></stupa-match-scheduler>
</p-dialog>
<p-dialog #pDialog [(visible)]="_isViewPlayerGrid" [style]="_dialogStyle" [draggable]="false" [modal]="true">
    <div class="innerContent">
        <div class="row">
            <div class="col-md-3">
                <input [(ngModel)]="_searchByPlayerNameView" type="text" pInputText (keydown)="searchPlayerInView()"
                    [placeholder]="'Search Player'" />
            </div>
        </div>
        <p-table class="common-table text-center" [value]="_topPlayers">
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th>Name</th>
                    <th>State</th>
                    <th>Club</th>
                    <th>Point</th>
                    <th>Email</th>
                    <!-- <th>Action</th> -->
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-player let-columns="columns">
                <tr>
                    <td>{{ player.name }}</td>
                    <td>{{ player.state }}</td>
                    <td>{{ player.club }}</td>
                    <td>{{ player.points }}</td>
                    <td>{{ player.email }}</td>
                    <td>
                        <!-- <input type="checkbox" (click)="playerForMainDraw($event, player)" [ngModel]="player.isSelected" /> -->
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</p-dialog>
<p-toast position="bottom-center" key="bc"></p-toast>
<stupa-gif-loader *ngIf="_showLoader"></stupa-gif-loader>